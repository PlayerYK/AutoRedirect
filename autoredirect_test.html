<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AutoRedirect 全功能测试页面</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      line-height: 1.6;
    }

    .container {
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }

    h1 {
      color: #2c3e50;
      text-align: center;
      font-size: 2.5em;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      text-align: center;
      color: #6c757d;
      font-size: 1.1em;
      margin-bottom: 40px;
    }

    /* 模式选择器样式 */
    .mode-selector {
      background: linear-gradient(135deg, #f8faff, #e8f4f8);
      padding: 30px;
      border-radius: 15px;
      margin: 30px 0;
      border: 2px solid #4facfe;
      text-align: center;
    }

    .mode-selector h3 {
      color: #2c3e50;
      margin-bottom: 20px;
      font-size: 1.5em;
    }

    .mode-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .mode-btn {
      padding: 15px 30px;
      border: none;
      border-radius: 25px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #f8f9fa;
      color: #495057;
      border: 2px solid #dee2e6;
      min-width: 140px;
    }

    .mode-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .mode-btn.active {
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: white;
      border-color: #4facfe;
      box-shadow: 0 8px 25px rgba(79, 172, 254, 0.3);
    }

    /* 使用指南样式 */
    .usage-guide {
      background: linear-gradient(135deg, #fff3cd, #ffeaa7);
      padding: 25px;
      border-radius: 15px;
      margin: 30px 0;
      border: 2px solid #ffd93d;
    }

    .usage-guide h3 {
      color: #856404;
      margin-top: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .usage-steps {
      counter-reset: step-counter;
    }

    .usage-step {
      counter-increment: step-counter;
      margin: 15px 0;
      padding: 15px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 10px;
      position: relative;
      padding-left: 60px;
    }

    .usage-step::before {
      content: counter(step-counter);
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      background: #ffc107;
      color: #212529;
      width: 25px;
      height: 25px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 14px;
    }

    /* 配置区域样式 */
    .config-section {
      background: #f8faff;
      padding: 30px;
      border-left: 5px solid #4facfe;
      margin: 30px 0;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .config-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }

    .config-header h3 {
      color: #2c3e50;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.4em;
    }

    .copy-btn {
      background: linear-gradient(135deg, #28a745, #20c997);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .copy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(40, 167, 69, 0.3);
    }

    .copy-btn.copied {
      background: linear-gradient(135deg, #17a2b8, #138496);
    }

    .config-box {
      background: #2d3748;
      color: #e2e8f0;
      padding: 20px;
      border-radius: 12px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 14px;
      white-space: pre-line;
      overflow-x: auto;
      border: 1px solid #4a5568;
      position: relative;
    }

    .config-box .config-comment {
      color: #9ca3af; /* 浅灰色用于注释 */
      font-style: italic;
    }

    /* 测试案例样式 */
    .test-cases {
      margin: 30px 0;
    }

    .test-case {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      border: 1px solid #e9ecef;
      margin: 20px 0;
      transition: all 0.3s ease;
    }

    .test-case:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
    }

    .test-case h4 {
      margin-top: 0;
      color: #495057;
      font-size: 1.3em;
      border-bottom: 2px solid #4facfe;
      padding-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .test-link {
      background: linear-gradient(135deg, #fff3cd, #ffeaa7);
      padding: 15px;
      border-radius: 10px;
      margin: 15px 0;
      border: 1px solid #ffd93d;
      transition: all 0.3s ease;
    }

    .test-link:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(255, 193, 7, 0.3);
    }

    .test-link a {
      color: #0066cc;
      text-decoration: none;
      word-break: break-all;
      font-weight: 600;
    }

    .test-link a:hover {
      text-decoration: underline;
      color: #004499;
    }

    .expected {
      background: #f8f9fa;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      font-style: italic;
      border-left: 3px solid #28a745;
    }

    .match-type-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      color: white;
      margin: 5px 5px 5px 0;
    }

    .exact {
      background: #28a745;
    }

    .prefix {
      background: #007bff;
    }

    .suffix {
      background: #ffc107;
      color: #212529;
    }

    .contains {
      background: #dc3545;
    }

    .wildcard {
      background: #6f42c1;
    }

    /* 公共说明样式 */
    .common-info {
      background: linear-gradient(135deg, #e8f4f8, #d1ecf1);
      padding: 25px;
      border-radius: 15px;
      margin: 30px 0;
      border: 2px solid #17a2b8;
    }

    .common-info h3 {
      color: #0c5460;
      margin-top: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
      gap: 30px;
      margin: 25px 0;
    }

    .feature-card {
      background: linear-gradient(135deg, #f8faff, #e8f4f8);
      padding: 30px;
      border-radius: 12px;
      border: 1px solid #4facfe;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    /* 本地文件重定向说明专用样式 */
    .localfile-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));
      gap: 30px;
      margin: 25px 0;
    }

    .localfile-card {
      background: linear-gradient(135deg, #f8fff8, #e8f8e8);
      padding: 30px;
      border-radius: 15px;
      border: 2px solid #28a745;
      box-shadow: 0 4px 15px rgba(40, 167, 69, 0.1);
    }

    .localfile-card h5 {
      color: #155724;
      margin-top: 0;
      font-size: 1.2em;
      border-bottom: 2px solid #28a745;
      padding-bottom: 8px;
      margin-bottom: 15px;
    }

    .localfile-card ul {
      margin: 0;
      padding-left: 20px;
    }

    .localfile-card li {
      margin: 10px 0;
      line-height: 1.6;
    }

    .localfile-card strong {
      color: #155724;
      font-weight: 600;
    }

    .localfile-card code {
      background: #d4edda;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.9em;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .feature-card h5 {
      color: #2c3e50;
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 1.2em;
      font-weight: 600;
      border-bottom: 2px solid #4facfe;
      padding-bottom: 8px;
    }

    .feature-card ul {
      margin: 0;
      padding-left: 20px;
    }

    .feature-card li {
      margin: 8px 0;
      line-height: 1.6;
    }

    .feature-card code {
      background: #e8f4f8;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 0.85em;
      color: #2c3e50;
      border: 1px solid #4facfe;
      word-break: break-all;
    }

    /* 隐藏/显示内容 */
    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }

    /* 成功提示样式 */
    .success-toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #28a745;
      color: white;
      padding: 15px 25px;
      border-radius: 10px;
      box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
      z-index: 1000;
      transform: translateX(400px);
      transition: transform 0.3s ease;
    }

    .success-toast.show {
      transform: translateX(0);
    }

    /* 本地文件测试特殊样式 */
    .local-file-section {
      background: linear-gradient(135deg, #e8f5e8, #d4edda);
      border: 2px solid #28a745;
    }

    .local-file-section h3 {
      color: #155724;
    }

    /* 响应式设计 */
    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }

      .mode-buttons {
        flex-direction: column;
        align-items: center;
      }

      .mode-btn {
        width: 100%;
        max-width: 300px;
      }

      .config-header {
        flex-direction: column;
        align-items: stretch;
      }

      h1 {
        font-size: 2em;
      }

      /* 详细使用指南响应式 */
      .feature-grid {
        grid-template-columns: 1fr;
        gap: 25px;
      }

      .feature-card {
        padding: 25px;
      }

      /* 本地文件重定向说明响应式 */
      .localfile-grid {
        grid-template-columns: 1fr;
        gap: 25px;
      }

      .localfile-card {
        padding: 25px;
      }

      .localfile-card h5 {
        font-size: 1.1em;
      }
    }

    @media (max-width: 1200px) {
      /* 详细使用指南中等屏幕优化 */
      .feature-grid {
        grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
        gap: 25px;
      }

      .localfile-grid {
        grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
        gap: 25px;
      }
    }

    @media (max-width: 1000px) {
      /* 本地文件重定向说明中等屏幕优化 */
      .localfile-grid {
        grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
        gap: 25px;
      }
    }

    @media (max-width: 1400px) {
      /* 详细使用指南大屏幕优化 */
      .feature-grid {
        grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
        gap: 25px;
      }
    }

    /* Chrome Web Store 安装链接样式 */
    .install-banner {
      background: linear-gradient(135deg, #4285f4, #34a853);
      color: white;
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      margin: 30px 0;
      box-shadow: 0 8px 25px rgba(66, 133, 244, 0.3);
      position: relative;
      overflow: hidden;
    }

    .install-banner::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transform: rotate(45deg);
      animation: shine 3s infinite;
    }

    @keyframes shine {
      0% {
        transform: translateX(-100%) translateY(-100%) rotate(45deg);
      }

      100% {
        transform: translateX(100%) translateY(100%) rotate(45deg);
      }
    }

    .install-banner h3 {
      margin: 0 0 15px 0;
      font-size: 1.5em;
      position: relative;
      z-index: 1;
    }

    .install-banner p {
      margin: 0 0 20px 0;
      font-size: 1.1em;
      opacity: 0.9;
      position: relative;
      z-index: 1;
    }

    .install-btn {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      background: white;
      color: #4285f4;
      padding: 15px 30px;
      border-radius: 25px;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      position: relative;
      z-index: 1;
    }

    .install-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      color: #4285f4;
      text-decoration: none;
    }

    .install-btn:active {
      transform: translateY(0);
    }

    /* Footer 样式 */
    .footer {
      background: linear-gradient(135deg, #2c3e50, #34495e);
      color: white;
      padding: 40px 0;
      margin-top: 50px;
      text-align: center;
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    .footer h3 {
      margin: 0 0 20px 0;
      font-size: 1.8em;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .footer p {
      margin: 0 0 25px 0;
      font-size: 1.1em;
      opacity: 0.9;
      line-height: 1.6;
    }

    .footer-install-btn {
      display: inline-flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: white;
      padding: 18px 35px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: 600;
      font-size: 18px;
      transition: all 0.3s ease;
      box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
      margin-bottom: 20px;
    }

    .footer-install-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 35px rgba(79, 172, 254, 0.6);
      color: white;
      text-decoration: none;
    }

    .footer-links {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      font-size: 14px;
      opacity: 0.7;
    }

    /* 响应式设计更新 */
    @media (max-width: 768px) {
      .install-banner {
        padding: 15px;
        margin: 20px 0;
      }

      .install-banner h3 {
        font-size: 1.3em;
      }

      .install-btn {
        padding: 12px 25px;
        font-size: 14px;
      }

      .footer {
        padding: 30px 0;
      }

      .footer h3 {
        font-size: 1.5em;
      }

      .footer-install-btn {
        padding: 15px 30px;
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>🚀 AutoRedirect 全功能测试</h1>
    <p class="subtitle">选择测试模式，获取配置，开始测试 - 支持本地文件重定向</p>

    <!-- Chrome Web Store 安装横幅 -->
    <div class="install-banner">
      <h3>🎯 还没有安装 AutoRedirect 扩展？</h3>
      <p>立即从 Chrome Web Store 安装，开始享受智能重定向功能！</p>
      <a href="https://chromewebstore.google.com/detail/edgiaaakbcjloebnmehbnfiajbhcpbcf" target="_blank"
        class="install-btn">
        🛒 立即安装扩展
      </a>
    </div>

    <!-- 使用指南 -->
    <div class="usage-guide">
      <h3>📋 使用指南</h3>
      <div class="usage-steps">
        <div class="usage-step">
          <strong>选择测试模式：</strong>根据您的需求选择基础测试、本地文件测试、高级测试或完整测试模式
        </div>
        <div class="usage-step">
          <strong>复制配置：</strong>点击"一键复制配置"按钮，将配置内容复制到剪贴板
        </div>
        <div class="usage-step">
          <strong>设置扩展：</strong>打开AutoRedirect扩展的选项页面，粘贴配置并保存
        </div>
        <div class="usage-step">
          <strong>启用扩展：</strong>确保扩展开关处于开启状态（图标应为粗体）
        </div>
        <div class="usage-step">
          <strong>开始测试：</strong>按照页面下方的测试案例进行功能验证
        </div>
        <div class="usage-step">
          <strong>高级测试：</strong>使用扩展选项页面的测试工具进行更详细的规则验证和调试
        </div>
      </div>

      <div
        style="background: #fff3cd; padding: 15px; border-radius: 10px; margin-top: 20px; border: 1px solid #ffd93d;">
        <h4 style="color: #856404; margin-top: 0;">⚠️ 隐私模式使用说明</h4>
        <p style="margin-bottom: 10px; color: #856404;">如果您在隐私模式（无痕模式）下遇到 <code>ERR_BLOCKED_BY_CLIENT</code> 错误：</p>
        <ol style="color: #856404; margin-bottom: 0;">
          <li>打开 <code>chrome://extensions/</code></li>
          <li>找到 AutoRedirect 扩展</li>
          <li>点击"详细信息"</li>
          <li>开启"在无痕模式下启用"选项</li>
          <li>或者在普通浏览器窗口中进行测试</li>
        </ol>
      </div>
      <div style="background: #e8f4f8; padding: 20px; border-radius: 10px; margin-top: 20px; border: 1px solid #17a2b8;">
        <h4 style="color: #0c5460; margin-top: 0;">🧪 高级测试工具 - 扩展选项页面</h4>
        <p style="margin-bottom: 15px; color: #0c5460;">需要更详细的规则测试和调试？请按以下方法打开扩展选项页面：</p>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px; margin: 15px 0;">
          <div style="background: rgba(255, 255, 255, 0.8); padding: 15px; border-radius: 8px; border: 1px solid #bee5eb;">
            <h5 style="color: #0c5460; margin: 0 0 10px 0; font-size: 1em;">🔧 方法一：扩展图标</h5>
            <ol style="margin: 0; padding-left: 20px; color: #0c5460; font-size: 0.9em;">
              <li>右键点击浏览器工具栏中的 AutoRedirect 图标</li>
              <li>选择"选项"或"扩展程序选项"</li>
            </ol>
          </div>
          
          <div style="background: rgba(255, 255, 255, 0.8); padding: 15px; border-radius: 8px; border: 1px solid #bee5eb;">
            <h5 style="color: #0c5460; margin: 0 0 10px 0; font-size: 1em;">🔧 方法二：扩展管理</h5>
            <ol style="margin: 0; padding-left: 20px; color: #0c5460; font-size: 0.9em;">
              <li>地址栏输入：<code>chrome://extensions/</code></li>
              <li>找到 AutoRedirect → 详细信息 → 扩展程序选项</li>
            </ol>
          </div>
          
          <div style="background: rgba(255, 255, 255, 0.8); padding: 15px; border-radius: 8px; border: 1px solid #bee5eb;">
            <h5 style="color: #0c5460; margin: 0 0 10px 0; font-size: 1em;">🔧 方法三：直接访问</h5>
            <div style="margin: 0; color: #0c5460; font-size: 0.9em;">
              地址栏输入：<br>
              <code style="background: #d1ecf1; padding: 2px 6px; border-radius: 4px; font-size: 0.8em; word-break: break-all;">chrome-extension://edgiaaakbcjloebnmehbnfiajbhcpbcf/options.html</code>
            </div>
          </div>
        </div>
        
        <div style="background: #d1ecf1; padding: 12px; border-radius: 6px; margin-top: 15px;">
          <p style="margin: 0; color: #0c5460; font-size: 0.9em;">
            💡 <strong>选项页面功能：</strong>重定向路径追踪、循环检测、详细匹配日志、规则验证工具等
          </p>
        </div>
      </div>
    </div>

    <!-- 模式选择器 -->
    <div class="mode-selector">
      <h3>🎯 选择测试模式</h3>
      <div class="mode-buttons">
        <button class="mode-btn active" onclick="switchMode('basic')">
          🔰 基础测试
        </button>
        <button class="mode-btn" onclick="switchMode('localfile')">
          📁 本地文件测试
        </button>
        <button class="mode-btn" onclick="switchMode('advanced')">
          ⚡ 高级测试
        </button>
        <button class="mode-btn" onclick="switchMode('complete')">
          🎯 完整测试
        </button>
      </div>
    </div>

    <!-- 基础测试配置 -->
    <div id="basic-content" class="content-section active">
      <div class="config-section">
        <div class="config-header">
          <h3><span class="icon">⚙️</span> 基础测试配置</h3>
          <button class="copy-btn" onclick="copyConfig('basic')">
            📋 一键复制配置
          </button>
        </div>
        <p>包含所有基础匹配模式的测试配置，适合初次使用和功能验证：</p>
        <div class="config-box" id="basic-config"></div>
      </div>

      <div class="test-cases">
        <div class="test-case">
          <h4>🎯 精确匹配测试</h4>
          <p>测试精确匹配模式的准确性，使用 <span class="match-type-badge exact">=</span> 前缀。注意：精确匹配需要完整的URL格式</p>

          <div class="test-link">
            <strong>测试方法：</strong><br>
            在地址栏访问：<code>localhost:3000</code>
          </div>

          <div class="expected">
            <strong>预期结果：</strong> 完整URL精确匹配跳转到对应目标网站
          </div>
        </div>

        <div class="test-case">
          <h4>🚀 开头匹配测试</h4>
          <p>测试开头匹配模式，使用 <span class="match-type-badge prefix">^</span> 前缀或 <span
              class="match-type-badge prefix">*</span> 后缀</p>

          <div class="test-link">
            <strong>测试方法：</strong><br>
            在地址栏访问：<code>https://dev.mysite.com</code> 或 <code>https://api.service.com</code>
          </div>

          <div class="expected">
            <strong>预期结果：</strong> dev开头的URL跳转到 development.example.com，api开头的URL跳转到 api.example.com
          </div>
        </div>

        <div class="test-case">
          <h4>🏁 结尾匹配测试</h4>
          <p>测试结尾匹配模式，使用 <span class="match-type-badge suffix">*</span> 前缀或 <span
              class="match-type-badge suffix">$</span> 后缀</p>

          <div class="test-link">
            <strong>测试方法：</strong><br>
            在地址栏访问：<code>https://myapp.local</code> 或 <code>https://myproject-config.json</code>
          </div>

          <div class="expected">
            <strong>预期结果：</strong> .local结尾的URL跳转到 production.example.com，config.json结尾的URL跳转到 config.example.com
          </div>
        </div>

        <div class="test-case">
          <h4>🔗 智能URL提取测试</h4>
          <p>测试基于规则模式的智能URL提取和解码功能</p>

          <div class="test-link">
            <strong>知乎链接测试：</strong><br>
            <a href="https://link.zhihu.com/?target=https%3A//www.baidu.com" target="_blank">
              知乎跳转到百度
            </a>
          </div>

          <div class="expected">
            <strong>预期结果：</strong> 基于匹配的规则模式自动提取并解码URL参数，直接跳转到目标网站
          </div>
        </div>

        <div class="test-case">
          <h4>🎯 URL模板替换测试</h4>
          <p>测试URL模板替换功能，使用 <span class="match-type-badge wildcard">*</span> 通配符和 <code>{1}, {2}, {3}</code> 占位符</p>

          <div class="test-link">
            <strong>简单域名替换：</strong><br>
            <a href="https://old-domain.com/path" target="_blank">
              old-domain.com/path
            </a>
          </div>

          <div class="test-link">
            <strong>复杂路径重写：</strong><br>
            <a href="http://example.com/page/subpage" target="_blank">
              example.com/page/subpage
            </a>
          </div>

          <div class="expected">
            <strong>预期结果：</strong> 根据规则跳转到新的目标网站，路径参数被正确替换
          </div>
          </div>
          </div>
          </div>

    <!-- 本地文件测试配置 -->
    <div id="localfile-content" class="content-section">
      <div class="config-section local-file-section">
        <div class="config-header">
          <h3><span class="icon">📁</span> 本地文件重定向测试配置</h3>
          <button class="copy-btn" onclick="copyConfig('localfile')">
            📋 一键复制配置
          </button>
        </div>
        <p>专门用于测试本地文件路径重定向功能，支持多种本地文件路径格式和匹配模式：</p>
        <div class="config-box" id="localfile-config"></div>
      </div>

      <div class="test-cases">
        <div class="test-case">
          <h4>📄 基础本地文件重定向</h4>
          <p>测试基础的本地文件重定向功能</p>

          <div class="test-link">
            <strong>结尾匹配测试（推荐）：</strong><br>
            在浏览器中打开本地文件：<code>file:///Users/ExtTeam/dev/ChromeStore/autoRedirect/autoredirect_local.html</code>
          </div>
          
          <div class="test-link">
            <strong>完整路径匹配测试：</strong><br>
            使用精确的file://协议路径匹配
          </div>

          <div class="expected">
            <strong>预期结果：</strong> 本地HTML文件自动跳转到 https://www.example.com/autoRedirect/
          </div>
          </div>

        <div class="test-case">
          <h4>🎯 通配符本地文件重定向</h4>
          <p>测试使用 <span class="match-type-badge wildcard">*</span> 通配符的批量本地文件重定向</p>

          <div class="test-link">
            <strong>路径通配符测试：</strong><br>
            打开任意 <code>ChromeStore/autoRedirect/*.html</code> 文件
          </div>
          
          <div class="test-link">
            <strong>file://协议通配符测试：</strong><br>
            使用完整的file://协议路径进行通配符匹配
          </div>

          <div class="expected">
            <strong>预期结果：</strong> 文件名被提取并用于构建目标URL，如 options.html → https://www.example.com/options/
          </div>
          </div>

        <div class="test-case">
          <h4>🔧 高级本地文件重定向场景</h4>
          <p>测试复杂的本地文件重定向场景</p>

          <div class="test-link">
            <strong>跨用户通用映射：</strong><br>
            支持不同用户目录的通用匹配模式
          </div>
          
          <div class="test-link">
            <strong>扩展名转换：</strong><br>
            本地HTML文件重定向到PHP页面
          </div>
          
          <div class="test-link">
            <strong>子目录结构处理：</strong><br>
            支持多级目录的文件重定向
          </div>

          <div class="expected">
            <strong>预期结果：</strong> 复杂的路径结构被正确解析和重定向
          </div>
        </div>
      </div>
    </div>

    <!-- 高级测试配置 -->
    <div id="advanced-content" class="content-section">
      <div class="config-section">
        <div class="config-header">
          <h3><span class="icon">⚡</span> 高级测试配置</h3>
          <button class="copy-btn" onclick="copyConfig('advanced')">
            📋 一键复制配置
          </button>
        </div>
        <p>包含复杂匹配规则和开发场景的高级配置，适合深度测试：</p>
        <div class="config-box" id="advanced-config"></div>
      </div>

      <div class="test-cases">
        <div class="test-case">
          <h4>🎭 多结果选择测试</h4>
          <p>测试多个匹配规则的选择功能</p>

          <div class="test-link">
            <strong>测试方法：</strong><br>
            访问包含 <code>multi</code> 的URL
          </div>
          
          <div class="expected">
            <strong>预期结果：</strong> 显示选择页面，包含Google、Bing、Yahoo等多个选项
          </div>
          </div>
          
          <div class="test-case">
            <h4>🔧 复杂URL模板替换</h4>
            <p>测试高级的URL模板替换功能</p>
          
            <div class="test-link">
              <strong>参数重新排列：</strong><br>
              <a href="site.com/user/page/settings/section/profile" target="_blank">
                site.com/user/page/settings/section/profile
              </a>
            </div>
          
            <div class="test-link">
              <strong>重复使用占位符：</strong><br>
              <a href="old.com/user/john" target="_blank">
                old.com/user/john
              </a>
            </div>

          <div class="expected">
            <strong>预期结果：</strong> URL参数被重新排列或重复使用，跳转到新的结构化URL
          </div>
          </div>
          </div>
          </div>

    <!-- 完整测试配置 -->
    <div id="complete-content" class="content-section">
      <div class="config-section">
        <div class="config-header">
          <h3><span class="icon">🎯</span> 完整测试配置</h3>
          <button class="copy-btn" onclick="copyConfig('complete')">
            📋 一键复制配置
          </button>
        </div>
        <p>包含所有功能的完整配置，适合全面测试和生产环境使用：</p>
        <div class="config-box" id="complete-config"></div>
      </div>

      <div class="test-cases">
        <div class="test-case">
          <h4>🎯 全功能综合测试</h4>
          <p>测试所有匹配模式和功能的综合表现</p>

          <div class="test-link">
            <strong>精确匹配：</strong> 访问 localhost:3000 进行精确匹配测试
          </div>

          <div class="test-link">
            <strong>开头匹配：</strong> 访问dev、api开头的URL
          </div>

          <div class="test-link">
            <strong>结尾匹配：</strong> 访问.local、config.json结尾的URL
          </div>

          <div class="test-link">
            <strong>本地文件：</strong> 打开本地HTML文件测试重定向功能
          </div>

          <div class="expected">
            <strong>预期结果：</strong> 所有匹配模式都能正确工作，根据不同规则跳转到对应目标
          </div>
        </div>

        <div class="test-case">
          <h4>🔗 智能URL提取全测试</h4>
          <p>测试所有支持的URL提取和解码功能</p>

          <div class="test-link">
            <strong>知乎链接：</strong><br>
            <a href="https://link.zhihu.com/?target=https%3A//www.github.com" target="_blank">
              知乎跳转到GitHub
            </a>
          </div>

          <div class="expected">
            <strong>预期结果：</strong> 所有链接都能正确提取目标URL并直接跳转
          </div>
        </div>
      </div>
    </div>

    <!-- 详细使用指南 -->
    <div class="common-info">
      <h3>📖 详细使用指南</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <h5>🎯 匹配模式详解</h5>
          <ul style="margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.5;">
            <li><strong>精确匹配：</strong> <code>=example.com####target</code> （完全匹配）</li>
            <li><strong>开头匹配：</strong> <code>^test####target</code> 或 <code>test*####target</code> （以指定内容开头）</li>
            <li><strong>结尾匹配：</strong> <code>*test####target</code> 或 <code>test$####target</code> （以指定内容结尾）</li>
            <li><strong>包含匹配：</strong> <code>test####target</code> （默认模式，⚠️ 慎用！）</li>
            <li><strong>通配符：</strong> 在任意匹配模式中使用 <code>*</code> 匹配任意字符</li>
            <li><strong>模板替换：</strong> 使用 <code>{1}</code>, <code>{2}</code> 等占位符引用通配符匹配的内容</li>
          </ul>
        </div>
        <div class="feature-card">
          <h5>🔧 URL模板替换功能</h5>
          <ul style="margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.5;">
            <li><strong>基础语法：</strong> 使用 <code>*</code> (通配符) 匹配任意字符，用 <code>{1}, {2}, {3}</code> 等占位符按顺序引用通配符捕获的内容。</li>
            <li><strong>域名替换：</strong> <code>old.com/*####new.com/{1}</code> (<code>{1}</code> 对应 <code>*</code> 捕获的路径)</li>
            <li><strong>路径重写：</strong> <code>site.com/*/page/*####newsite.com/{1}/newpage/{2}</code> (<code>{1}</code> 对应第一个 <code>*</code>, <code>{2}</code> 对应第二个 <code>*</code>)</li>
            <li><strong>多段重组：</strong> <code>old.com/*/category/*/item/*####new.com/{1}/cat/{2}/product/{3}</code> (<code>{1}</code>, <code>{2}</code>, <code>{3}</code> 分别对应三个 <code>*</code>)</li>
            <li><strong>参数重排：</strong> <code>site.com/*/page/*/section/*####newsite.com/{3}/{1}/{2}</code> (按占位符索引重排捕获内容)</li>
            <li><strong>重复使用：</strong> <code>old.com/user/*####new.com/{1}/profile/{1}/settings</code> (<code>{1}</code> 被多次使用)</li>
            <li><strong>选择性使用：</strong> <code>old.com/*/category/*/item/*####new.com/{1}/products/{3}</code> (仅使用部分捕获内容，<code>{2}</code> 被忽略)</li>
          </ul>
        </div>
        <div class="feature-card">
          <h5>⚙️ 高级功能</h5>
          <ul style="margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.5;">
            <li>支持注释： 以 <code>#</code> 开头的行为注释行</li>
            <li>空行会被忽略</li>
            <li>规则按顺序匹配，第一个匹配的规则生效</li>
            <li><strong>注意：</strong>避免循环重定向</li>
            <li>支持多结果选择（同一URL匹配多个规则时显示选择页面）</li>
            <li>智能URL提取和解码功能</li>
          </ul>
        </div>
        <div class="feature-card">
          <h5>📝 配置示例与用法</h5>
          <ul style="margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.5;">
            <li><strong>基础格式：</strong> <code>原始URL####目标URL</code> （每行一条规则）</li>
            <li><strong>精确匹配：</strong> <code>=example.com####https://new-example.com</code></li>
            <li><strong>开头匹配：</strong> <code>^old-site.com####https://new-site.com</code></li>
            <li><strong>结尾匹配：</strong> <code>old.com$####https://new.com</code></li>
            <li><strong>包含匹配：</strong> <code>demo####https://example.com</code> （默认模式，慎用）</li>
            <li><strong>模板替换：</strong> <code>old.com/*####new.com/{1}</code> （域名迁移，保持路径）</li>
            <li><strong>智能提取：</strong> <code>link.zhihu.com/?target=####</code> （空目标URL，自动提取参数）</li>
            <li><strong>本地开发：</strong> <code>localhost:3000####https://myapp.com</code></li>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- 故障排除指南 -->
    <div class="common-info">
      <h3>🔧 故障排除与调试指南</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <h5>❗ 常见问题</h5>
          <ul style="margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.5;">
            <li><strong>隐私模式报错：</strong> ERR_BLOCKED_BY_CLIENT 错误，需要在扩展管理页面启用"在无痕模式下启用"</li>
            <li><strong>重定向不工作：</strong> 检查扩展是否启用，规则格式是否正确</li>
            <li><strong>匹配不准确：</strong> 确认使用了正确的匹配模式前缀</li>
            <li><strong>本地文件不跳转：</strong> 检查文件路径格式，确保使用了正确的匹配模式</li>
            <li><strong>循环重定向：</strong> 检查规则是否会导致目标URL再次匹配源规则</li>
            <li><strong>规则不生效：</strong> 确认规则顺序，第一个匹配的规则会生效</li>
          </ul>
        </div>
        <div class="feature-card">
          <h5>🔍 调试方法</h5>
          <ul style="margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.5;">
            <li>打开浏览器开发者工具（F12）</li>
            <li>查看Console标签页的日志</li>
            <li>检查Network标签页的请求</li>
            <li>在扩展管理页面查看Service Worker日志</li>
            <li>使用扩展选项页面的测试工具验证规则</li>
            <li>逐步简化规则，定位问题所在</li>
          </ul>
        </div>
        <div class="feature-card">
          <h5>💡 最佳实践 (通用)</h5>
          <ul style="margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.5;">
            <li><strong>优先精确匹配：</strong>尽可能使用精确匹配 (<code>=</code> 前缀) 或结尾匹配 (<code>$</code> 后缀) 提高规则的准确性，避免误触发。</li>
            <li><strong>通配符规则顺序：</strong>将更具体的规则（如精确匹配）放在通配符规则之前。</li>
            <li><strong>逐步测试：</strong>配置新规则后，先用简单明确的URL进行测试验证。</li>
            <li><strong>理解占位符：</strong>使用URL模板替换时，清晰理解占位符 <code>{1},{2}</code> 等对应通配符 <code>*</code> 的捕获顺序。</li>
            <li><strong>定期审查：</strong>定期检查和清理不再需要的规则，保持配置简洁高效。</li>
            <li><strong>添加注释：</strong>为复杂的或不直观的规则添加注释 (以 <code>#</code> 开头)，方便后续理解和维护。</li>
            <li><strong>避免循环：</strong>设计规则时要特别注意避免产生循环重定向。</li>
          </ul>
        </div>
        <div class="feature-card">
          <h5>🧪 测试建议</h5>
          <ul style="margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.5;">
            <li>配置规则后先在测试页面验证</li>
            <li>使用扩展选项页面的测试工具</li>
            <li>测试多种URL格式和边界情况</li>
            <li>验证通配符和占位符的正确性</li>
            <li>确保不会产生循环重定向</li>
            <li>测试本地文件重定向功能</li>
            <li>在不同浏览器模式下测试（普通/隐私模式）</li>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- 匹配模式快速参考 -->
    <div class="common-info">
      <h3>📚 匹配模式快速参考</h3>
      <div class="feature-grid">
        <div class="feature-card">
          <h5><span class="match-type-badge exact">精确匹配</span></h5>
          <p>使用 <code>=</code> 前缀，只匹配完全相同的URL</p>
          <p><small>最安全的匹配方式，避免误触发</small></p>
        </div>
        <div class="feature-card">
          <h5><span class="match-type-badge prefix">开头匹配</span></h5>
          <p>使用 <code>^</code> 前缀或 <code>*</code> 后缀</p>
          <p><small>匹配以指定字符串开头的URL</small></p>
        </div>
        <div class="feature-card">
          <h5><span class="match-type-badge suffix">结尾匹配</span></h5>
          <p>使用 <code>*</code> 前缀或 <code>$</code> 后缀</p>
          <p><small>匹配以指定字符串结尾的URL</small></p>
        </div>
        <div class="feature-card">
          <h5><span class="match-type-badge contains">包含匹配</span></h5>
          <p>默认模式（无特殊前缀/后缀）</p>
          <p><small>⚠️ <strong>慎用！全局匹配，极易出错。</strong> 例如，规则 <code>test####example.com</code> 会将任何包含 "test" 的URL（如 <code>mytestsite.com</code>, <code>http://localhost/test/page</code>）都重定向到 <code>example.com</code>。仅用于向后兼容或目标URL模式非常独特且无歧义的情况。</small></p>
        </div>
        <div class="feature-card">
          <h5><span class="match-type-badge wildcard">通配符匹配</span></h5>
          <p>使用 <code>*</code> 通配符和 <code>{1}, {2}, {3}</code> 占位符</p>
          <p><small>支持URL模板替换和参数重组</small></p>
        </div>
      </div>
      </div>
      
      <div class="common-info">
        <h3>📁 本地文件重定向说明</h3>
      <div class="localfile-grid">
        <div class="localfile-card">
          <h5>🎯 基础匹配模式</h5>
          <ul>
            <li><strong>推荐安全匹配：</strong>对于单个本地文件，推荐使用结尾匹配 <code>*autoredirect_local.html$</code> 或精确的 <code>=file:///完整路径</code>。</li>
            <li><strong>路径包含：</strong> <code>*ChromeStore/autoRedirect/test.html</code> 可用于匹配特定路径下的文件。</li>
            <li><strong>严格结尾：</strong> <code>*autoredirect_local.html$</code> 确保只匹配以此结尾的文件名。</li>
            </ul>
            </div>
        <div class="localfile-card">
          <h5>🔧 通配符模式</h5>
          <ul>
            <li><strong>单通配符：</strong> <code>*ChromeStore/autoRedirect/*.html</code> (捕获文件名到 <code>{2}</code>)。</li>
            <li><strong>多通配符：</strong> <code>*ChromeStore/autoRedirect/*/*.html</code> (捕获子目录到 <code>{2}</code>，文件名到 <code>{3}</code>)。</li>
            <li><strong>精确路径通配符：</strong> <code>=file:///path/to/your/project/*.html</code> (捕获文件名到 <code>{1}</code>)。</li>
            <li><strong>跨用户通配符：</strong> <code>=file:///Users/*/dev/*/*.html</code> (例如，<code>{1}</code> 对应用户名, <code>{2}</code> 对应项目名, <code>{3}</code> 对应文件名)。</li>
            </ul>
            </div>
        <div class="localfile-card">
          <h5>🚀 高级应用场景</h5>
          <ul>
            <li><strong>开发环境映射：</strong> 本地文件路径 <code>file:///...</code> → 远程开发或生产服务器URL。</li>
            <li><strong>扩展名转换：</strong> 例如，<code>*.html####target.com/{1}.php</code>。</li>
            <li><strong>批量重定向：</strong> 将整个本地目录结构映射到远程服务器的对应结构。</li>
            <li><strong>保持目录结构：</strong> 使用通配符和占位符确保子目录层级在重定向后得以保留。</li>
            </ul>
            </div>
        <div class="localfile-card">
          <h5>💡 本地文件重定向最佳实践</h5>
          <ul>
            <li><strong>明确协议：</strong> 规则中包含 <code>file:///</code> 时，匹配会更精确。</li>
            <li><strong>路径分隔符：</strong> Windows系统中的路径分隔符 <code>\</code> 通常需要转义或在扩展内部处理，但规则中一般使用 <code>/</code>。</li>
            <li><strong>通配符与占位符：</strong> 仔细测试通配符捕获的内容和占位符的对应关系，特别是多级目录和跨用户场景。</li>
            <li><strong>权限问题：</strong> 确保浏览器有访问本地文件的权限（通常需要用户在扩展设置中为本地文件URL授予权限）。</li>
            <li><strong>测试具体路径：</strong> 在配置了复杂的本地文件规则后，务必使用几个具体的本地文件路径进行测试。</li>
          </ul>
            </div>
      </div>
    </div>

  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <h3>🚀 AutoRedirect - 智能重定向扩展</h3>
      <p>
        AutoRedirect 是一款功能强大的 Chrome 浏览器扩展，支持多种匹配模式的智能重定向功能。<br>
        无论是开发环境切换、本地文件映射，还是复杂的URL重写，都能轻松应对。
      </p>
  
      <a href="https://chromewebstore.google.com/detail/edgiaaakbcjloebnmehbnfiajbhcpbcf" target="_blank"
        class="footer-install-btn">
        🛒 立即从 Chrome Web Store 安装
      </a>
  
      <div class="footer-links">
        <p>
          🌟 支持精确匹配、开头匹配、结尾匹配、通配符匹配等多种模式<br>
          📁 专业的本地文件重定向功能，完美支持开发环境<br>
          🔧 智能URL提取和解码，自动处理复杂跳转链接<br>
          ⚡ 高性能、低延迟，不影响浏览体验
        </p>
        <p style="margin-top: 15px;">
          © 2025 AutoRedirect. 让重定向更智能，让开发更高效。
        </p>
      </div>
    </div>
  </footer>

  <!-- 成功提示 -->
  <div id="success-toast" class="success-toast">
    ✅ 配置已复制到剪贴板！
  </div>

  <script>
    // 配置数据
    const configs = {
      basic: `# AutoRedirect 基础测试配置

# ===== 精确匹配测试 =====
=localhost:3000####https://dev.example.com

# ===== 开头匹配测试 =====
^dev####https://development.example.com
api*####https://api.example.com

# ===== 结尾匹配测试 =====
*.local$####https://config.example.com

# ===== URL模板替换测试 =====
# 简单域名替换
https://old-domain.com/*####https://new-domain.com/{1}
# 复杂路径重写
http://example.com/*/page/*####https://newsiteewpage/{2}

# ===== 智能URL提取测试 =====
link.zhihu.com/?target=####

# ===== 多结果选择测试 =====
multi####https://www.google.com
multi####https://www.bing.com
multi####https://www.yahoo.com`,

      localfile: `# AutoRedirect 本地文件重定向测试配置

# ===== 基础本地文件重定向 =====
# 1. 结尾匹配（推荐，安全且精确）
*autoredirect_local.html$####https://www.example.com/autoRedirect/

# 2. 完整file://协议路径匹配（最精确）
=file:///Users/ExtTeam/dev/ChromeStore/autoRedirect/autoredirect_local.html####https://www.example.com/autoRedirect/

# ===== 通配符本地文件重定向（URL模板替换） =====
# 3. 路径通配符匹配（推荐用于批量重定向）
*ChromeStore/autoRedirect/*.html####https://www.example.com/{2}/

# 4. file://协议的通配符匹配（最精确的批量匹配）
=file:///Users/ExtTeam/dev/ChromeStore/autoRedirect/*.html####https://www.example.com/{1}/

# 5. 多通配符匹配（支持子目录结构）
*ChromeStore/autoRedirect/*/*.html####https://www.example.com/{2}/{3}/

# ===== 高级本地文件重定向场景 =====
# 6. 本地开发环境到生产环境映射（跨用户通用）
=file:///Users/*/dev/*/autoRedirect/*.html####https://production.example.com/{3}/

# 7. 本地文件扩展名转换
*ChromeStore/autoRedirect/*.html####https://www.example.com/{2}.php

# ===== 测试用例说明 =====
# 测试用例1：基础文件重定向（包含匹配）
# 输入: file:///Users/ExtTeam/dev/ChromeStore/autoRedirect/autoredirect_local.html
# 输出: https://www.example.com/autoRedirect/

# 测试用例2：通配符文件名提取
# 输入: file:///Users/ExtTeam/dev/ChromeStore/autoRedirect/options.html
# 输出: https://www.example.com/options/

# 测试用例3：多通配符子目录处理
# 输入: file:///Users/ExtTeam/dev/ChromeStore/autoRedirect/subfolder/test.html
# 输出: https://www.example.com/subfolder/test/`,

      advanced: `# AutoRedirect 高级测试配置

# ===== 基础匹配=====
=localhost:3000####https://dev.example.com
demo####https://www.github.com

# ===== URL模板替换高级测试 =====
# 参数重新排列
site.com/*/page/*/section/*####newsite.com/{3}/{1}/{2}
# 重复使用占位符
old.com/user/*####new.com/{1}/profile/{1}/settings
# 精确路径重组
=old.com/electronics/category/phones/item/iphone####new.com/electronics/cat/phones/product/iphone

# ===== 复杂匹配测试 =====
^beta.####https://beta.mysite.com
*-staging$####https://staging.mysite.com

# ===== 智能URL提取测试 =====
link.zhihu.com/?target=####
weixin110.qq.com/cgi-bin/readtemplate?t=safety/index&url=####
www.baidu.com/link?url=####

# ===== 多结果选择测试 =====
multi####https://www.google.com
multi####https://www.bing.com
multi####https://www.yahoo.com`,

      complete: `# AutoRedirect 完整测试配置
# 支持井号注释功能 - 以#开头的行会被忽略

# ===== 本地文件路径重定向规则汇总 =====
# 支持多种本地文件路径格式和匹配模式

# --- 基础本地文件重定向 ---
# 1. 结尾匹配（推荐，安全且精确）
*autoredirect_local.html$####https://www.example.com/autoRedirect/

# 2. 完整file://协议路径匹配（最精确）
=file:///Users/ExtTeam/dev/ChromeStore/autoRedirect/autoredirect_local.html####https://www.example.com/autoRedirect/

# --- 通配符本地文件重定向（URL模板替换） ---
# 3. 路径通配符匹配（推荐用于批量重定向）
*ChromeStore/autoRedirect/*.html####https://www.example.com/{2}/

# 4. file://协议的通配符匹配（最精确的批量匹配）
=file:///Users/ExtTeam/dev/ChromeStore/autoRedirect/*.html####https://www.example.com/{1}/

# 5. 多通配符匹配（支持子目录结构）
*ChromeStore/autoRedirect/*/*.html####https://www.example.com/{2}/{3}/

# --- 高级本地文件重定向场景 ---
# 6. 本地开发环境到生产环境映射（跨用户通用）
=file:///Users/*/dev/*/autoRedirect/*.html####https://production.example.com/{3}/

# 7. 本地文件扩展名转换
*ChromeStore/autoRedirect/*.html####https://www.example.com/{2}.php

# ===== 精确匹配模式 =====
=localhost:3000####https://dev.example.com

# ===== 开头匹配模式 =====
^dev####https://development.example.com
api*####https://api.example.com

# ===== 结尾匹配模式 =====
*.local####https://production.example.com
*config.json$####https://config.example.com

# ===== URL模板替换功能 =====
# 基础域名替换：将old-domain.com的所有路径转移到new-domain.com
https://old-domain.com/*####https://new-domain.com/{1}
# 复杂路径重写：重新组织URL结构
http://example.com/*/page/*####https://newsite.com/{1}/newpage/{2}
# 精确路径重组：将特定路径重新排列
=old.com/electronics/category/phones/item/iphone####new.com/electronics/cat/phones/product/iphone
# 参数重新排列：改变URL段的顺序
site.com/*/page/*/section/*####newsite.com/{3}/{1}/{2}
# 重复使用占位符：同一个捕获组可以多次使用
old.com/user/*####new.com/{1}/profile/{1}/settings

# ===== 通用URL提取功能 =====
# 目标URL为空，用于自动提取和解码URL参数
link.zhihu.com/?target=####

# ===== 多结果选择测试 =====
# 当一个URL匹配多个规则时，会显示选择页面让用户选择
multi####https://www.google.com
multi####https://www.bing.com
multi####https://www.yahoo.com`
    }

    // 切换模式
    function switchMode(mode) {
      // 更新按钮状态
      document.querySelectorAll('.mode-btn').forEach(btn => {
        btn.classList.remove('active')
      })
      event.target.classList.add('active')

      // 隐藏所有内容区域
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active')
      })

      // 显示选中的内容区域
      document.getElementById(mode + '-content').classList.add('active')
    }

    // 复制配置
    async function copyConfig(mode) {
      const btn = event.target
      const originalText = btn.innerHTML

      // 检查剪贴板API支持
      if (!navigator.clipboard) {
        console.warn('浏览器不支持剪贴板API，使用降级方案')
        fallbackCopy(mode)
        return
      }

      try {
        const config = configs[mode]

        // 尝试写入剪贴板
        await navigator.clipboard.writeText(config)

        // 验证是否真的复制成功
        const clipboardText = await navigator.clipboard.readText()
        if (clipboardText === config) {
          console.log('复制成功验证通过')

          // 更新按钮状态
          btn.innerHTML = '✅ 已复制'
          btn.classList.add('copied')

          // 显示成功提示
          showSuccessToast()

          // 恢复按钮状态
          setTimeout(() => {
            btn.innerHTML = originalText
            btn.classList.remove('copied')
          }, 2000)
        } else {
          throw new Error('复制验证失败')
        }

      } catch (err) {
        console.error('剪贴板操作失败:', err)
        fallbackCopy(mode)
      }
    }

    // 降级复制方案
    function fallbackCopy(mode) {
      try {
        const configElement = document.getElementById(mode + '-config')
        const range = document.createRange()
        range.selectNode(configElement)
        window.getSelection().removeAllRanges()
        window.getSelection().addRange(range)

        // 尝试使用旧的execCommand
        const success = document.execCommand('copy')
        if (success) {
          console.log('降级复制成功')
          showSuccessToast()
        } else {
          alert('自动复制失败，已为您选中配置内容，请按 Ctrl+C (Windows) 或 Cmd+C (Mac) 手动复制')
        }
      } catch (err) {
        console.error('降级复制也失败:', err)
        alert('自动复制失败，已为您选中配置内容，请按 Ctrl+C (Windows) 或 Cmd+C (Mac) 手动复制')
      }
    }

    // 显示成功提示
    function showSuccessToast() {
      const toast = document.getElementById('success-toast')
      toast.classList.add('show')

      setTimeout(() => {
        toast.classList.remove('show')
      }, 3000)
    }

    // 页面加载完成后的初始化
    document.addEventListener('DOMContentLoaded', function () {
      // 检查是否支持剪贴板API
      if (!navigator.clipboard) {
        console.warn('浏览器不支持剪贴板API，将使用降级方案')
      }

      // 初始化配置内容显示
      initConfigDisplay()
    })

    // 初始化配置内容显示
    function initConfigDisplay() {
      // 将配置内容填充到对应的显示区域
      Object.keys(configs).forEach(mode => {
        const configElement = document.getElementById(mode + '-config');
        if (configElement) {
          // 使用innerHTML以便渲染注释的span标签
          let configContent = configs[mode];
          // 简单处理以 # 开头的注释行
          configContent = configContent.replace(/^#(.*)$/gm, '<span class="config-comment">#$1</span>');
          configElement.innerHTML = configContent;
        }
      });
    }

 
  </script>
</body>

</html>